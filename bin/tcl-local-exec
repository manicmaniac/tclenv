#!/usr/bin/env bash
#
# `tcl-local-exec` is a drop-in replacement for the standard Tcl
# shebang line:
#
#    #!/usr/bin/env tcl-local-exec
#
# Use it for scripts inside a project with an `.tclenv-version`
# file. When you run the scripts, they'll use the project-specified
# Tcl version, regardless of what directory they're run from. Useful
# for e.g. running project tasks in cron scripts without needing to
# `cd` into the project first.

set -e
export TCLENV_DIR="${1%/*}"

[ -n "$TCLENV_SILENCE_WARNINGS" ] || {
  echo "tclenv: \`tcl-local-exec' is deprecated and will be removed in the next release."
  echo "       To upgrade: https://github.com/sstephenson/tclenv/wiki/tcl-local-exec"
  echo
} >&2

exec tcl "$@"
